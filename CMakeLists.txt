PROJECT (MOONSHINE C)

SET(SRC "${MOONSHINE_SOURCE_DIR}")
SET(BIN "${MOONSHINE_BINARY_DIR}") 
SET(CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS 1)
SET(CMAKE_MODULE_PATH "${SRC}/cmake")

FIND_PACKAGE(LUA REQUIRED)
FIND_PACKAGE(SLANG REQUIRED)
FIND_PACKAGE(GLIB REQUIRED)
FIND_PACKAGE(GTHREAD REQUIRED)

INCLUDE_DIRECTORIES(BEFORE
	${SLANG_INCLUDE_DIR}
	${LUA_INCLUDE_DIR}
	${GLIB_INCLUDE_DIRS}
	${GTHREAD_INCLUDE_DIRS} 
	${SRC})

ADD_DEFINITIONS("-std=gnu99 -Wall -Winline")
ADD_DEFINITIONS("${GLIB_DEFINITIONS} ${GTHREAD_DEFINITIONS}")


INCLUDE_DIRECTORIES(${MOONSHINE_BINARY_DIR})
CONFIGURE_FILE(config.h.in
	${MOONSHINE_BINARY_DIR}/moonshine/config.h
	@ONLY IMMEDIATE)

ADD_SUBDIRECTORY(core)
